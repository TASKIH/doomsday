(window["webpackJsonpdiff-tool"]=window["webpackJsonpdiff-tool"]||[]).push([[0],{32:function(t,e,n){t.exports=n(33)},33:function(t,e,n){"use strict";n.r(e);var a=n(9),i=n(10),s=n(12),o=n(11),r=n(13),c=n(4),l=n.n(c),h=n(31),u=n.n(h),d=n(7),p=n(16),m=n.n(p),f=(n(87),function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(s.a)(this,Object(o.a)(e).call(this,t))).state={count:n.props.count,color:m.a.Util.getRandomColor(),noiseOpacity:0},n}return Object(r.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.applyCache()}},{key:"applyCache",value:function(){this.rect.cache(),this.rect.getLayer().batchDraw()}},{key:"render",value:function(){var t=this;return l.a.createElement(d.Rect,{filters:[m.a.Filters.Noise],noise:1,x:this.props.x,y:this.props.y,opacity:this.state.noiseOpacity,width:this.props.width,height:this.props.height,fill:this.state.color,ref:function(e){t.rect=e}})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.worldTimer-t.count;return t.worldTimer<=150?0===e.noiseOpacity?null:{noiseOpacity:0}:n<=100?1===e.noiseOpacity?null:{noiseOpacity:1}:null}}]),e}(l.a.Component)),g=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(s.a)(this,Object(o.a)(e).call(this,t))).state={count:n.props.count,color:"black",noiseOpacity:0},n}return Object(r.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.applyCache()}},{key:"applyCache",value:function(){this.rect.cache(),this.rect.getLayer().batchDraw()}},{key:"render",value:function(){var t=this;return l.a.createElement(d.Rect,{x:this.props.x,y:this.props.y,opacity:this.state.noiseOpacity,width:this.props.width,height:this.props.height,fill:this.state.color,ref:function(e){t.rect=e}})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.worldTimer-t.count<=0?1===e.noiseOpacity?null:{noiseOpacity:1}:null}}]),e}(l.a.Component),y=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(s.a)(this,Object(o.a)(e).call(this,t))).state={count:t.count,noiseOpacity:0},n}return Object(r.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.applyCache()}},{key:"applyCache",value:function(){this.line.cache(),this.line.getLayer().batchDraw()}},{key:"render",value:function(){var t=this;return l.a.createElement(d.Line,{points:this.props.polygons,fill:"black",stroke:"black",strokeWidth:1,closed:!0,opacity:this.state.noiseOpacity,ref:function(e){t.line=e}})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.worldTimer-t.count<=0?1===e.noiseOpacity?null:{noiseOpacity:1}:null}}]),e}(l.a.Component),v=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(s.a)(this,Object(o.a)(e).call(this,t))).handleLoad=function(){n.setState({image:n.image})},n.state={image:null,scale:t.scale},n}return Object(r.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"componentDidUpdate",value:function(t){t.src!==this.props.src&&this.loadImage()}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.src=this.props.src,this.image.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var t=this;return l.a.createElement(d.Image,{image:this.state.image,opacity:this.state.opacity,scaleX:this.state.scale,scaleY:this.state.scale,ref:function(e){t.imageNode=e}})}}]),e}(l.a.Component),w=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(s.a)(this,Object(o.a)(e).call(this,t))).state={count:300,hasBlackOut:!1,noWorldsExist:!1,noWorldMessage:"",noWorldMessageRest:["N","o"," ","r","e","s","p","o","n","s","e"," ","f","r","o","m"," ","t","h","e"," ","w","o","r","l","d","."," ","."," ","."],initialTimer:[],scale:1},n}return Object(r.a)(e,t),Object(i.a)(e,[{key:"getRandomInt",value:function(t){return Math.floor(Math.random()*Math.floor(t))}},{key:"generateBlackRects",value:function(t,e,n,a,i,s){for(var o=0;o<n;o++){var r=t+this.getRandomInt(e-t);s.push({x:this.getRandomInt(a.file_width)*i,y:this.getRandomInt(a.file_height)*i,width:this.getRandomInt(a.file_width/10*i),height:this.getRandomInt(a.file_height/10*i),timer:r})}}},{key:"componentDidMount",value:function(){var t=this,e=new URL(window.location).searchParams.get("tag");fetch("http://18.179.98.130/api/image?tag="+e,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(t){return t.json()})).then((function(e){if(!e.file_name)return t.setState({noWorldsExist:!0}),void t.startNoWorldMessage();e.file_name=e.file_name;var n=window.innerWidth/e.file_width||1,a=window.innerHeight/e.file_height||1,i=Math.min(n,a),s=[],o=e.points.map((function(e,n){return s.push(100+t.getRandomInt(100)),{x:e[1]*i,y:e[0]*i,height:(e[2]-e[0])*i,width:(e[3]-e[1])*i}})),r=[];t.generateBlackRects(150,70,50,e,i,r),t.generateBlackRects(70,30,20,e,i,r),t.generateBlackRects(30,10,20,e,i,r),t.generateBlackRects(10,0,100,e,i,r);var c=e.verts.map((function(t,e){return t.map((function(t){return t*i}))}));t.setState({image:{url:e.file_name},scale:i,timers:s,rects:o,count:300,blackRects:r,polygons:c}),t.start()})).catch((function(e){t.setState({noWorldsExist:!0}),t.startNoWorldMessage()}))}},{key:"start",value:function(){var t=this;this.intervalTimer=setInterval((function(){return t.update()}),100)}},{key:"startNoWorldMessage",value:function(){var t=this;this.intervalTimer=setInterval((function(){return t.updateNoWorldMessage()}),100)}},{key:"stop",value:function(){clearInterval(this.intervalTimer)}},{key:"update",value:function(){var t=this.state.count-1,e=!1,n=!1;t<=0&&(e=!0,n=!0,this.stop(),this.startNoWorldMessage()),this.setState({count:t,hasBlackOut:e,noWorldsExist:n})}},{key:"updateNoWorldMessage",value:function(){var t=this.state.noWorldMessage,e=this.state.noWorldMessageRest;e.length<=0?this.stop():(t+=e.shift(),this.setState({noWorldMessage:t,noWorldMessageRest:e}))}},{key:"render",value:function(){var t=this;if(this.state.noWorldsExist)return l.a.createElement("div",{id:"error"},l.a.createElement("div",{class:"nes-container is-dark with-title"},l.a.createElement("p",{class:"title"},"404"),l.a.createElement("p",null,this.state.noWorldMessage)));var e=[],n=[],a=[];return this.state.rects&&(e=this.state.rects.map((function(e,n){return l.a.createElement(f,{key:"rect"+n,x:e.x,y:e.y,width:e.width,height:e.height,count:t.state.timers[n],worldTimer:t.state.count})}))),this.state.blackRects&&(n=this.state.blackRects.map((function(e,n){return l.a.createElement(g,{key:"rect"+n,x:e.x,y:e.y,width:e.width,height:e.height,count:e.timer,worldTimer:t.state.count})}))),this.state.polygons&&(a=this.state.polygons.map((function(e,n){return l.a.createElement(y,{key:"line"+n,count:200,polygons:e,worldTimer:t.state.count})}))),l.a.createElement(d.Stage,{width:window.innerWidth,height:window.innerHeight},l.a.createElement(d.Layer,null,this.state.image&&l.a.createElement(v,{src:this.state.image.url,scale:this.state.scale,count:this.state.maxTimer}),a,e,n,l.a.createElement(d.Rect,{x:0,y:0,width:window.innerWidth,height:window.innerHeight,opacity:this.state.hasBlackOut?1:0,fill:"black"})))}}]),e}(l.a.Component);u.a.render(l.a.createElement(w,null),document.getElementById("root"))},87:function(t,e,n){}},[[32,1,2]]]);
//# sourceMappingURL=main.30097d45.chunk.js.map